@using BezvizSystem.Web.Views.Helpers.Pagging
@using BezvizSystem.Web.Models.Mark

@model IndexViewModel<ViewMarkModel>

@{
    int i = 0;
}


<tr class="no_border">
    <td class="no_border" colspan="2"><input id="filterBtn" type="button" class="simply_form_red marbot20 buttonParameters" style="width:100%" value="Фильтр" /></td>
    <td class="no_border"></td>
    <td class="no_border"></td>
    <td class="no_border"></td>
    <td class="no_border"></td>
    <td class="no_border"></td>
</tr>

<tr>
    <td class="coly1">
        №
    </td>
    <td class="coly2">
        @Html.DisplayName("Дата прибытия")
    </td>
    <td class=" coly1">
        @Html.DisplayName("Количество дней пребывания")
    </td>
    <td class=" coly2">
        @Html.DisplayName("Пункт пропуска для въезда")
    </td>
    <td class="coly1">
        @Html.DisplayName("Количество участников")
    </td>
    <td class="coly2">
        @Html.DisplayName("Статус")
    </td>
    <td class="coly2">
        @Html.DisplayName("Туроператор")
    </td>
    <td class="coly1">
        @Html.DisplayName("Отметка о прибытии")
    </td>
</tr>

@foreach (var item in Model.Models)
{
    <tr class="visitor_str mainTableRow" id="@item.Id" onclick="onRowClickHandler(event);">
        <td class="mainTableRow">
            @(++i)
            @{var status = item.Status == "Сохранено" ? 1 : 2;}
        </td>
        <td>
            @(item.DateArrival.HasValue ? item.DateArrival.Value.ToString("dd.MM.yyyy") : "")
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DaysOfStay)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CheckPoint)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CountMembers)
        </td>
        <td style="color:@(status == 1 ? "red" : "green")">
            @Html.DisplayFor(modelItem => item.Status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Operator)
        </td>
        <td name="mark">

            @if (item.Arrived == "V")
            {
                <img src="~/Content/img/checkmark.png" width="24" height="24" alt="Отмечено">
            }
            else if (item.Arrived == "X")
            {
                <img src="~/Content/img/cross.png" width="24" height="24" alt="Нет отметки">
            }
            else
            {
                <img src="~/Content/img/icons8-тест-частично-пройден-50.png" width="24" height="24" alt="Нет отметки">
            }
        </td>
    </tr>
}

<tr>
    <td style="border:none; text-align: right" colspan="8">
        <div style="display: inline-block" id="compact-pagination" class="pagination"></div>
    </td>
</tr>


<script src="~/Scripts/MyScripts/ShowPanels.js"></script>
<script>
    showPanel('filterBtn', 'panel');

    @{
        var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
        var search = serializer.Serialize(ViewBag.SearchModel);
    }

    //paging options
     $(function() {
         $('#compact-pagination').pagination({
            items: @Model.PageInfo.TotalItems,
             itemsOnPage: @Model.PageInfo.PageSize,
             currentPage: @Model.PageInfo.PageNumber,
             cssStyle: 'compact-theme',
             hrefTextPrefix: '@Url.Action("GroupData")?search=@search&page=',
             prevText: 'Пред.',
             nextText: 'След.'
         });
     });
</script>